<h2 class="govuk-heading-l">
  Log of Audit Events
</h2>

<table class="govuk-table">
  <caption class="govuk-table__caption govuk-table__caption--m">All</caption>
  <thead class="govuk-table__head">
    <tr class="govuk-table__row">
      <th scope="col" class="govuk-table__header">Time</th>
      <th scope="col" class="govuk-table__header">NOMS No.</th>
      <th scope="col" class="govuk-table__header">Tags</th>
      <th scope="col" class="govuk-table__header">System event?</th>
      <th scope="col" class="govuk-table__header">User</th>
      <th scope="col" class="govuk-table__header">Event</th>
    </tr>
  </thead>
  <tbody class="govuk-table__body">
    <% @audit_events.each do |audit_event| %>
      <tr class="govuk-table__row">
        <td class="govuk-table__cell"><%= rand(20).days.ago.to_date %></td>
        <td class="govuk-table__cell"><%= audit_event.nomis_offender_id || 'N/A' %></td>
        <td class="govuk-table__cell govuk-body-s"><%= audit_event.tags.join('<br>').html_safe %></td>
        <td class="govuk-table__cell"><%= audit_event.system_event? ? 'Yes' : 'No' %></td>
        <td class="govuk-table__cell">TODO</td>
        <td class="govuk-table__cell">
          <details class="govuk-details" data-module="govuk-details">
            <summary class="govuk-details__summary">
              <span class="govuk-details__summary-text">
                Raw data
              </span>
            </summary>
            <div class="govuk-details__text">
              <pre><%= audit_event.data.to_yaml %></pre>
            </div>
          </details>
        </td>
    <% end %>
    </tr>
  </tbody>
</table>
